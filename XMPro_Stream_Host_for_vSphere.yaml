tosca_definitions_version: dell_1_0

description: >
  Creates a Windows Virtual Machine in vSphere environment and installs
  one or multiple instances of XMPro Stream Host.

imports:
  - dell/types/types.yaml
  # Infrastructure - vSphere VM
  - infrastructure/xmpro_stream_host/vsphere/inputs.yaml
  - infrastructure/xmpro_stream_host/vsphere/blueprint.yaml
  # Application - XMPro Stream Host
  - application/stream_host/inputs.yaml
  - application/stream_host/inputs_common.yaml
  - application/stream_host/blueprint.yaml
  # Outputs
  - application/stream_host/outputs.yaml

input_groups:
  vsphere:
    display_label: vSphere Virtual Machine
    collapsible: true
    index: 0
    inputs:
      - vm_template
      - hostname
      - vm_user_name
      - vm_password_secret_name
      - allowed_esxi_host
      - datastore_name
      - resource_pool_name
      - vm_folder
      - vcpus
      - memory_size
      - os_disk_size
      - disk_provisioning
      - network
      - dhcp
      - static_ip
      - cidr
      - gateway
      - dns
  xmpro:
    display_label: XMPro Stream Inputs
    collapsible: true
    index: 1
    inputs:
      - artifact_configuration_secret_name
      - win_get_url_validate_certs
      - environment_type
      - xmpro_suite_deployment_id
      - stream_host_instance_number_for_default
      - additional_instances_for_non_default_collection

labels:
  csys-obj-type:
    values:
      - service
  target_environment:
    values:
      - vsphere
  vendor:
    values:
      - xmpro
  solution:
    values:
      - stream_host
  version:
    values:
      - "4.3.7.0"

blueprint_labels:
  env:
    values:
      - vsphere
